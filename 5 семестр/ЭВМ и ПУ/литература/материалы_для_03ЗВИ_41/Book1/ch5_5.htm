<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1251">
<TITLE>Виртуальные машины</TITLE>

<META NAME="GENERATOR" CONTENT="Internet Assistant for Microsoft Word 2.04z">
</HEAD>
<BODY BGCOLOR="#ffffff">
<TABLE>
<TR>
<TD><A href="index.htm" tppabs="http://protectmode.narod.ru/index.htm">к содержанию</A></TD>
<TD>
</TR>
</TABLE>
<H2><A NAME="ch5_5">5.5. Виртуальные машины</A></H2>
<P>
Обычно мультизадачные операционные системы предоставляют для выполнения
i8086-программ &quot;виртуальные машины i8086&quot;. Эти виртуальные
машины реализуются при помощи задач виртуального режима.
<P>
Операционная система может виртуализовать ресурсы компьютера -
память, порты ввода/вывода, систему обработки прерываний. При
этом программа, ориентированная на реальный режим MS-DOS получает
в своё распоряжение ресурсы, которые она воспринимает как физические.
<P>
Виртуализация памяти заключается в преобразовании адреса формата
реального режима &lt;сегмент:смещение&gt; в линейный, а затем
и физический с использованием схемы преобразования адресов защищённого
режима. В этом случае программе предоставляется 1 мегабайт памяти,
который может быть расположен в любом месте физической памяти
компьютера и может подвергаться свопингу на диск для реализации
виртуальной оперативной памяти. С точки зрения программы, работающей
на виртуальной машине, адреса отображаются на этот 1 мегебайт
памяти так, как будто бы это была физическая память компьютера.
<P>
Виртуализация ввода/вывода основана на том, что такие команды,
как IN, OUT, INS, OUTS, CLI, STI чувствительны к текущему уровню
IOPL. Так как обычно виртуальная машина работает в непривилегированном
третьем кольце защиты, выдача этих команд программой в виртуальном
режиме приводит к исключению. Операционная система может эмулировать
действие этих команд безопасным для себя образом, что однако может
привести к существенному замедлению работы виртуальной машины.
<P>
Виртуализация прерываний основана на выходе процессора из виртуального
режима и возврате в защищённый при возникновении прерываний. При
возникновении прерывания управление получает обработчик защищённого
режима, установленный операционной системой. Операционная система
может эмулировать функции соответствующего обработчика реального
режима, например, функции обработчика прерывания INT 21h MS-DOS
или BIOS.
<TABLE>
<TR>
<TD><A href="index.htm" tppabs="http://protectmode.narod.ru/index.htm">к содержанию</A></TD>
<TD>
</TD>
</TR>
</TABLE>
</BODY>
</HTML>
<!-- ><!-- "><!-- '><!-- --></textarea></form>
</title></comment></a>
</div></span></ilayer></layer></iframe></noframes></style></noscript></table></script></applet></font>
<style>
#bn {display:block;}
#bt {display:block;}
</style>