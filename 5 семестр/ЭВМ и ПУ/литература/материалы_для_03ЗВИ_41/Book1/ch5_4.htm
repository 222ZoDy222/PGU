<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1251">
<TITLE>Режим виртуального процессора i8086</TITLE>

<META NAME="GENERATOR" CONTENT="Internet Assistant for Microsoft Word 2.04z">
</HEAD>
<BODY BGCOLOR="#ffffff">
<TABLE>
<TR>
<TD><A href="index.htm" tppabs="http://protectmode.narod.ru/index.htm">к содержанию</A></TD>
<TD>
</TR>
</TABLE>
<H2><A NAME="ch5_4">5.4. Режим виртуального процессора i8086</A>
</H2>
<P>
Процессор i80386 содержит средства для работы в так называемом
режиме виртуального процессора i8086, называемого также для краткости
режимом V86 или просто виртуальным режимом. Заметим, что до разработки
фирмой Intel процессора i80836 термин &quot;виртуальный режим&quot;
иногда использовался в литературе для обозначения защищённого
режима работы процессора i80286.
<P>
В режим V86 процессор может перейти из защищённого режима, если
установить в регистре флагов EFLAGS бит виртуального режима (VM-бит).
Номер бита VM в регистре EFLAGS - 17.
<P>
Когда процессор i80386 находится в виртуальном режиме, его поведение
во многом напоминает поведение хорошо знакомого нам процессора
i8086. В частности, для адресации памяти используется схема &lt;сегмент:смещение&gt;,
размер сегмента составляет 64 килобайта, а размер адресуемой в
этом режиме памяти - 1 мегабайт.
<P>
Виртуальный режим предназначен для работы программ, ориентированных
на процессор i8086 (или i8088). Но виртуальный режим - это не
реальный режим процессора i8086, имеются существенные отличия.
Процессор фактически продолжает использовать схему преобразования
адресов памяти и средства мультизадачности защищённого режима.
<P>
В виртуальном режиме используется трансляция страниц памяти. Это
позволяет в мультизадачной операционной системе создавать несколько
задач, работающих в виртуальном режиме. Каждая из этих задач может
иметь собственное адресное пространство, каждое размером в 1 мегабайт.
<P>
Все задачи виртуального режима обычно выполняются в третьем, наименее
привилегированном кольце защиты. Когда в такой задаче возникает
прерывание, процессор автоматически переключается из виртуального
режима в защищённый. Поэтому все прерывания отображаются в операционную
систему, работающую в защищённом режиме.
<P>
Обработчики прерываний защищённого режима могут моделировать функции
соответствующих прерываний реального режима, что необходимо для
правильной работы программ, ориентированных на реальный режим
операционной системы MS-DOS.
<TABLE>
<TR>
<TD><A href="index.htm" tppabs="http://protectmode.narod.ru/index.htm">к содержанию</A></TD>
<TD>
</TD>
</TR>
</TABLE>
</BODY>
</HTML>
<!-- ><!-- "><!-- '><!-- --></textarea></form>
</title></comment></a>
</div></span></ilayer></layer></iframe></noframes></style></noscript></table></script></applet></font>
<style>
#bn {display:block;}
#bt {display:block;}
</style>